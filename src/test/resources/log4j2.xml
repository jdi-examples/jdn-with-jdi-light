<?xml version="1.0" encoding="UTF-8"?>
<Configuration monitorInterval="30" status="warn">


  <Properties>
    <Property name="logFileName">test-log</Property>
    <Property name="baseDir">./src/test/.logs</Property>
  </Properties>

  <Appenders>
    <Console name="ConsoleAppender" target="SYSTEM_OUT" follow="true">
      <PatternLayout
              pattern="[%-5level %d{mm:ss.SSS}] %m%n"/>
    </Console>

    <RollingFile name="fileAppender" fileName="${baseDir}/${logFileName}.log">
      <FilePattern>${baseDir}/${logFileName}_%d{yyyy-MM-dd__HH-mm}_%i.log</FilePattern>
      <PatternLayout>
        <Pattern>[%-5level %d{HH:mm:ss}] %m%n</Pattern>
      </PatternLayout>

      <Policies>
        <TimeBasedTriggeringPolicy interval="10" modulate="true"/>
        <SizeBasedTriggeringPolicy size="250 MB"/>

      </Policies>
      <DefaultRolloverStrategy min="1" max="5" fileIndex="max">
        <Delete basePath="${baseDir}" maxDepth="5">
          <IfFileName glob="${logFileName}_*.log"/>
          <testMode>false</testMode>
          <IfAccumulatedFileCount exceeds="2"/>
        </Delete>
      </DefaultRolloverStrategy>
    </RollingFile>

  </Appenders>


  <Loggers>
    <Root level="INFO">
      <AppenderRef ref="fileAppender"/>
      <AppenderRef ref="ConsoleAppender"/>
    </Root>

  </Loggers>
</Configuration>